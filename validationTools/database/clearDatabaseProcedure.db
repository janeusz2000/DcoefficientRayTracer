use VALIDATIONS;

DROP TABLE IF EXISTS VALIDATION_DATA;
DROP TABLE IF EXISTS STATISTIC_VALUES;
DROP TABLE IF EXISTS SIMULATION_PROPERTIES;


CREATE TABLE IF NOT EXISTS SIMULATION_PROPERTIES(
   SIMULATION_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
   SOURCE_POWER DECIMAL(10, 2) NOT NULL,
   NUM_OF_COLLECTORS INT NOT NULL,
   TOTAL_NUMBER_OF_RAYS INT NOT NULL,
   MAX_TRACKING INT NOT NULL,
   SIMUALTION_DATE DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS STATISTIC_VALUES(
   STATISTIC_VALUES_ID BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
   MODEL VARCHAR(30) NOT NULL,
   PARAMETER_NAME VARCHAR(256) NOT NULL,
   MEAN_ERROR DECIMAL(11, 8) NOT NULL,
   STANDARD_DEVIATION_ERROR DECIMAL(11, 8) NOT NULL,
   RMSE DECIMAL(11, 8) NOT NULL,
   MAX_ERROR DECIMAL(11, 8) NOT NULL,
   MIN_ERROR DECIMAL(11, 8) NOT NULL,
   MEDIAN_ERROR DECIMAL(11, 8) NOT NULL
);

CREATE TABLE IF NOT EXISTS VALIDATION_DATA(
   VALIDATION_ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
   VALIDATION_DATE DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
   PARAMETER_NAME VARCHAR(256) NOT NULL,
   SIMULATION_PROPERTIES_ID INT NOT NULL,
   SAMPLE1 BIGINT NOT NULL,
   SAMPLE2 BIGINT NOT NULL,
   SAMPLE3 BIGINT NOT NULL,
   SAMPLE4 BIGINT NOT NULL,
   SAMPLE5 BIGINT NOT NULL,
   SAMPLE6 BIGINT NOT NULL,
   SAMPLE7 BIGINT NOT NULL,
   SAMPLE8 BIGINT NOT NULL,
   FOREIGN KEY (SIMULATION_PROPERTIES_ID) REFERENCES SIMULATION_PROPERTIES(SIMULATION_ID),
   FOREIGN KEY (SAMPLE1) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE2) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE3) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE4) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE5) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE6) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE7) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID),
   FOREIGN KEY (SAMPLE8) REFERENCES STATISTIC_VALUES(STATISTIC_VALUES_ID)
);
